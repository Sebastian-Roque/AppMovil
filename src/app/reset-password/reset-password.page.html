<ion-header>
  <ion-toolbar>
    <ion-title class="ion-text-center">Restablecer Contraseña</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="header-content ion-padding">
    <h1 class="ion-text-center" style="font-size: 2.5rem;">Recupera tu contraseña</h1>
  </div>

  <!-- Campo para el nombre de usuario -->
  <ion-item>
    <ion-label position="floating">Nombre de Usuario</ion-label>
    <ion-input 
      type="text" 
      [(ngModel)]="username" 
      required 
      minlength="3" 
      maxlength="8"
      pattern="[a-zA-Z0-9]*"
      [disabled]="isUserValidated">
    </ion-input>
  </ion-item>

  <!-- Pregunta de seguridad, solo aparece si el usuario ha sido validado -->
  <ion-item *ngIf="isUserValidated && !isSecurityValidated">
    <ion-label position="floating">{{ securityQuestion }}</ion-label>
    <ion-input 
      type="text" 
      [(ngModel)]="securityAnswer" 
      required
      [disabled]="isSecurityValidated">
    </ion-input>
  </ion-item>

  <!-- Nueva contraseña, solo aparece si la respuesta de seguridad ha sido validada -->
  <ion-item *ngIf="isSecurityValidated">
    <ion-label position="floating">Nueva Contraseña</ion-label>
    <ion-input 
      [type]="newPasswordType" 
      [(ngModel)]="newPassword" 
      required>
    </ion-input>
    <ion-button fill="clear" slot="end" (click)="toggleNewPasswordVisibility()">
      <ion-icon [name]="newPasswordIcon"></ion-icon>
    </ion-button>
  </ion-item>

  <!-- Confirmar contraseña, solo aparece si la respuesta de seguridad ha sido validada -->
  <ion-item *ngIf="isSecurityValidated">
    <ion-label position="floating">Confirmar Contraseña</ion-label>
    <ion-input 
      [type]="confirmPasswordType" 
      [(ngModel)]="confirmPassword" 
      required>
    </ion-input>
    <ion-button fill="clear" slot="end" (click)="toggleConfirmPasswordVisibility()">
      <ion-icon [name]="confirmPasswordIcon"></ion-icon>
    </ion-button>
  </ion-item>

  <!-- Botón de validación -->
  <ion-button expand="block" (click)="validateInputs()">VALIDAR</ion-button>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-text class="ion-text-center">
      <p class="ion-text-center">&copy; 2024. Todos los derechos reservados.</p>
    </ion-text>
  </ion-toolbar>
</ion-footer>
